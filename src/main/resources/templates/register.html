<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--favicon-->
    <link rel="icon" type="image/x-icon" th:href="@{/assets/img/tab_icon.png}">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" th:href="@{/assets/plugins/fontawesome-free/css/all.min.css}">
    <!-- my style-->
    <link rel="stylesheet" th:href="@{/assets/css/custom.css}">

    <style>
        .invalid-msg {
            width: 100%;
            margin-top: 0.25rem;
            font-size: 80%;
            color: #dc3545;
        }
    </style>

    <title >Sahabat Quran | Register</title>
</head>
<body>
<div class="d-flex">
    <div class="image-wrapper d-none d-lg-block">

    </div>
    <div class="form-wrapper flex-fill d-flex justify-content-center align-items-center">
        <div class="form-box">
            <div class="text-center">
                <!--                <img th:src="@{/assets/img/logo_ptb_orbit.png}" alt="logo">-->
                <hr>
                <h2 class="fw-bold mb-0" id="appTitle">Sahabat Quran | Register</h2>
                <p>Silahkan isi form di bawah ini untuk menaftar</p>
                <div class="alert alert-danger" role="alert" th:if="${errorMessage}" th:text="${errorMessage}">
                </div>
                <!--                <div class="alert alert-danger" role="alert" style="display: none;" id="captchaMsg">-->
                <!--                    Harap isi captcha-->
                <!--                </div>-->
                <div class="alert alert-success" role="alert" th:if="${successMessage}" th:text="${successMessage}">
                </div>
            </div>
            <form id="registerForm" th:action="@{/register}" method="post">
                <div class="mb-3">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-control" name="fullName" placeholder="Full Name" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" name="email" placeholder="Email" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Phone</label>
                    <input type="text" class="form-control" name="phone" placeholder="Phone" required>
                </div>
                <div class="mb-3 row" style="padding: 0 0.5rem">
                    <label for="password" class="form-label col-12 p-0">Password</label>
                    <div class="col-10 p-0">
                        <input type="password" class="form-control password-field" id="password" name="password" placeholder="Enter your password" required >
                    </div>
                    <div class="col-2">
                        <button type="button" class="btn btn-info btn-sm w-100 h-100 toggle-password" title="See password" data-target="#password"><i class="fa fa-eye"></i></button>
                    </div>
                </div>
                <div class="mb-3 row"  style="padding: 0 0.5rem">
                    <label for="confPassword" class="form-label col-12 p-0">Confirm Password</label>
                    <div class="col-10 p-0">
                        <input type="password" class="form-control password-field" id="confPassword" name="confPassword" placeholder="Enter password confirmation" required>
                    </div>
                    <div class="col-2">
                        <button type="button" class="btn btn-info btn-sm w-100 h-100 toggle-password" title="Lihat password" data-target="#confPassword"><i class="fa fa-eye"></i></button>
                    </div>
                    <div class="invalid-msg text-small col-12 p-0" id="pw-msg" style="display: none">
                        Password must same
                    </div>
                </div>
                <!--                <div class="mb-3 text-center">-->
                <!--                    <div class="g-recaptcha" data-callback="recaptchaCallback" th:attr="data-sitekey=${siteKey}"></div>-->
                <!--                </div>-->
                <div class="d-grid">
                    <button id="submitBtn" type="submit" class="btn btn-primary">Daftar</button>
                </div>
            </form>
            <p class="mt-2">Sudah memiliki akun ? <a th:href="@{/login}">Login di sini</a></p>
        </div>
    </div>
</div>
<!-- /.login-box -->

<!-- jQuery -->
<script th:src="@{/assets/plugins/jquery/jquery.min.js}"></script>
<!-- Bootstrap 4 -->
<script th:src="@{/assets/plugins/bootstrap/js/bootstrap.bundle.min.js}"></script>
<!--inputmask-->
<script th:src="@{/assets/plugins/inputmask/jquery.inputmask.min.js}"></script>
<!-- AdminLTE App -->
<script th:src="@{/assets/dist/js/adminlte.min.js}"></script>
<!--custom toast script-->
<script th:src="@{/assets/js/toast.js}"></script>
<script th:src="@{/assets/js/inputmask.js}"></script>
<script th:src="@{/assets/js/password-toggler.js}"></script>
<!--google recaptcha-->
<!--<script src="https://www.google.com/recaptcha/api.js"></script>-->
<script>
    let pwdOk = false
    let captchaOk = true //false

    $(".password-field").on("input", function (){
        if($("#password").val() === $("#confPassword").val()){
            $("#pw-msg").hide();
            pwdOk = true
            enableDisableBtn()
        }else{
            $("#pw-msg").show();
            pwdOk = false
            enableDisableBtn()
        }
    })

    // function recaptchaCallback() {
    //     captchaOk = true
    //     enableDisableBtn()
    // }

    function enableDisableBtn(){
        $("#submitBtn").prop("disabled", !(pwdOk && captchaOk))
    }
</script>
</body>
</html>
